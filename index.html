<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Job Portal</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>

<nav class="navbar">
    <div class="logo" onclick="goHome()">JobPortal</div>
    <ul class="nav-links"><li><a href="#" onclick="showLogin()">Login</a></li></ul>
</nav>

<!-- Landing -->
<section id="landing">
    <h1>Find Your Dream Job</h1>
    <p>Jobs, Recruiters & Candidates â€“ All in One Place</p>
    <button onclick="showLogin()">Login</button>
</section>

<!-- Login -->
<section id="loginSection" class="hidden">
    <h2>Login</h2>
    <form id="loginForm">
        <input type="email" id="loginEmail" placeholder="Email" required>
        <input type="password" id="loginPassword" placeholder="Password" required>
        <select id="loginRole">
            <option value="candidate">Candidate</option>
            <option value="recruiter">Recruiter</option>
            <option value="admin">Admin</option>
        </select>
        <button type="submit">Login</button>
    </form>
    <p>Don't have an account? <a href="#" onclick="showRegister()">Register</a></p>
</section>

<!-- Role Selection -->
<section id="roleSelection" class="hidden">
    <h2>Select Role</h2>
    <div class="cards">
        <div class="card" onclick="showCandidateRegister()">Candidate</div>
        <div class="card" onclick="showRecruiterRegister()">Recruiter</div>
    </div>
</section>

<!-- Candidate Registration -->
<section id="candidateRegister" class="hidden">
    <h2>Candidate Registration</h2>
    <form id="candidateForm">
        <input type="text" id="candName" placeholder="Full Name" required>
        <input type="email" id="candEmail" placeholder="Email" required>
        <input type="password" id="candPassword" placeholder="Password" required>
        <input type="text" id="candSkills" placeholder="Skills (comma separated)">
        <input type="text" id="candPhone" placeholder="Phone">
        <button type="submit">Register</button>
    </form>
</section>

<!-- Recruiter Registration -->
<section id="recruiterRegister" class="hidden">
    <h2>Recruiter Registration</h2>
    <form id="recruiterForm">
        <input type="text" id="recName" placeholder="Full Name" required>
        <input type="email" id="recEmail" placeholder="Email" required>
        <input type="password" id="recPassword" placeholder="Password" required>
        <input type="text" id="recCompany" placeholder="Company Name">
        <input type="text" id="recPhone" placeholder="Phone">
        <button type="submit">Register</button>
    </form>
</section>

<script>
function hideAll(){ document.querySelectorAll('section').forEach(s=>s.classList.add('hidden'));}
function goHome(){ hideAll(); document.getElementById('landing').classList.remove('hidden'); }
function showLogin(){ hideAll(); document.getElementById('loginSection').classList.remove('hidden'); }
function showRegister(){ hideAll(); document.getElementById('roleSelection').classList.remove('hidden'); }
function showCandidateRegister(){ hideAll(); document.getElementById('candidateRegister').classList.remove('hidden'); }
function showRecruiterRegister(){ hideAll(); document.getElementById('recruiterRegister').classList.remove('hidden'); }

// Login
document.getElementById('loginForm').addEventListener('submit', async e=>{
    e.preventDefault();
    const email=document.getElementById('loginEmail').value;
    const password=document.getElementById('loginPassword').value;
    const role=document.getElementById('loginRole').value;
    try{
        const res=await axios.post('https://backend-ats-z0tb.onrender.com/login',{email,password,role});
        if(res.data.status==='success'){ window.location.href=`${role}_dashboard.html?email=${email}`; }
        else{ alert(res.data.message); }
    }catch(err){ alert('Login Failed'); }
});

// Candidate Registration
document.getElementById('candidateForm').addEventListener('submit', async e=>{
    e.preventDefault();
    const data={
        name:document.getElementById('candName').value,
        email:document.getElementById('candEmail').value,
        password:document.getElementById('candPassword').value,
        skills:document.getElementById('candSkills').value,
        phone:document.getElementById('candPhone').value
    };
    try{ await axios.post('https://backend-ats-z0tb.onrender.com/register/candidate',data); alert('Registered'); showLogin(); }
    catch(err){ alert('Failed'); }
});

// Recruiter Registration
document.getElementById('recruiterForm').addEventListener('submit', async e=>{
    e.preventDefault();
    const data={
        name:document.getElementById('recName').value,
        email:document.getElementById('recEmail').value,
        password:document.getElementById('recPassword').value,
        company:document.getElementById('recCompany').value,
        phone:document.getElementById('recPhone').value
    };
    try{ await axios.post('https://backend-ats-z0tb.onrender.com/register/recruiter',data); alert('Registered'); showLogin(); }
    catch(err){ alert('Failed'); }
});
</script>

</body>
</html>
