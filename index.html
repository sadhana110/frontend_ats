<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Super Job Portal</title>
<!-- Bootstrap 5 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Roboto', sans-serif;
    background-color: #f5f5f5;
    margin: 0; padding: 0;
  }
  .navbar {
    background-color: #0073B1;
  }
  .navbar-brand, .nav-link {
    color: #fff !important;
  }
  .section { display: none; padding: 20px; }
  .active-section { display: block; }
  .job-card {
    background-color: #fff;
    padding: 15px; margin-bottom: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }
  .job-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
  .btn-primary { background-color: #0073B1; border: none; }
  .btn-primary:hover { background-color: #005f8d; }
  .status-badge {
    padding: 3px 8px; border-radius: 5px; font-size: 0.85rem;
  }
  .status-viewed { background-color: #ffe599; color: #000; }
  .status-shortlisted { background-color: #6aa84f; color: #fff; }
  .status-rejected { background-color: #e06666; color: #fff; }
  .message-box { border: 1px solid #ccc; padding: 10px; border-radius: 8px; margin-bottom: 10px; background-color: #fff; }
  input, select, textarea { margin-bottom: 10px; }
  .pointer { cursor: pointer; }
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg">
  <div class="container-fluid">
    <a class="navbar-brand" href="#" onclick="showSection('home')">Job Portal</a>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link pointer" onclick="showSection('home')">Home</a></li>
        <li class="nav-item"><a class="nav-link pointer" onclick="showSection('applicantLogin')">Applicant Login</a></li>
        <li class="nav-item"><a class="nav-link pointer" onclick="showSection('hrLogin')">HR Login</a></li>
        <li class="nav-item"><a class="nav-link pointer" onclick="showSection('applicantRegister')">Applicant Register</a></li>
        <li class="nav-item"><a class="nav-link pointer" onclick="showSection('hrRegister')">HR Register</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Sections -->
<div class="container">

  <!-- Home -->
  <div id="home" class="section active-section text-center">
    <h1 class="my-4">Welcome to the Super Job Portal</h1>
    <p>Register/Login as Applicant or HR to get started.</p>
  </div>

  <!-- Applicant Registration -->
  <div id="applicantRegister" class="section">
    <h3>Applicant Registration</h3>
    <form id="applicantRegisterForm">
      <input type="text" id="applicantName" class="form-control" placeholder="Full Name" required>
      <input type="email" id="applicantEmail" class="form-control" placeholder="Email" required>
      <input type="password" id="applicantPassword" class="form-control" placeholder="Password" required>
      <input type="text" id="applicantContact" class="form-control" placeholder="Contact Number" required>
      <input type="number" id="applicantAge" class="form-control" placeholder="Age" required>
      <input type="text" id="applicantSkills" class="form-control" placeholder="Skills (comma separated)" required>
      <input type="text" id="applicantExperience" class="form-control" placeholder="Experience (Years)" required>
      <input type="text" id="applicantDegree" class="form-control" placeholder="Highest Degree" required>
      <input type="text" id="applicantUniversity" class="form-control" placeholder="University/College" required>
      <input type="file" id="applicantResume" class="form-control">
      <button type="submit" class="btn btn-primary w-100">Register</button>
    </form>
  </div>

  <!-- HR Registration -->
  <div id="hrRegister" class="section">
    <h3>HR / Company Registration</h3>
    <form id="hrRegisterForm">
      <input type="text" id="hrCompanyName" class="form-control" placeholder="Company Name" required>
      <input type="text" id="hrName" class="form-control" placeholder="HR Name" required>
      <input type="email" id="hrEmail" class="form-control" placeholder="Email" required>
      <input type="password" id="hrPassword" class="form-control" placeholder="Password" required>
      <input type="text" id="hrContact" class="form-control" placeholder="Contact Number" required>
      <textarea id="hrDescription" class="form-control" placeholder="Company Description"></textarea>
      <input type="file" id="hrLogo" class="form-control">
      <button type="submit" class="btn btn-primary w-100">Register</button>
    </form>
  </div>

  <!-- Applicant Login -->
  <div id="applicantLogin" class="section">
    <h3>Applicant Login</h3>
    <form id="applicantLoginForm">
      <input type="email" id="loginApplicantEmail" class="form-control" placeholder="Email" required>
      <input type="password" id="loginApplicantPassword" class="form-control" placeholder="Password" required>
      <button type="submit" class="btn btn-primary w-100">Login</button>
    </form>
  </div>

  <!-- HR Login -->
  <div id="hrLogin" class="section">
    <h3>HR / Company Login</h3>
    <form id="hrLoginForm">
      <input type="email" id="loginHrEmail" class="form-control" placeholder="Email" required>
      <input type="password" id="loginHrPassword" class="form-control" placeholder="Password" required>
      <button type="submit" class="btn btn-primary w-100">Login</button>
    </form>
  </div>

  <!-- Applicant Dashboard -->
  <div id="applicantDashboard" class="section">
    <h3>Applicant Dashboard</h3>
    <ul class="nav nav-tabs my-3">
      <li class="nav-item"><a class="nav-link active pointer" onclick="showApplicantTab('jobFeed')">Job Feed</a></li>
      <li class="nav-item"><a class="nav-link pointer" onclick="showApplicantTab('appliedJobs')">Applied Jobs</a></li>
      <li class="nav-item"><a class="nav-link pointer" onclick="showApplicantTab('applicantProfile')">Profile</a></li>
    </ul>

    <!-- Job Feed -->
    <div id="jobFeed" class="applicant-tab active-section"></div>

    <!-- Applied Jobs -->
    <div id="appliedJobs" class="applicant-tab"></div>

    <!-- Profile -->
    <div id="applicantProfile" class="applicant-tab">
      <h5>Applicant Profile</h5>
      <p id="profileInfo"></p>
    </div>
  </div>

  <!-- HR Dashboard -->
  <div id="hrDashboard" class="section">
    <h3>HR Dashboard</h3>
    <ul class="nav nav-tabs my-3">
      <li class="nav-item"><a class="nav-link active pointer" onclick="showHrTab('postJob')">Post Job</a></li>
      <li class="nav-item"><a class="nav-link pointer" onclick="showHrTab('postedJobs')">Posted Jobs</a></li>
      <li class="nav-item"><a class="nav-link pointer" onclick="showHrTab('applications')">Applications</a></li>
      <li class="nav-item"><a class="nav-link pointer" onclick="showHrTab('hrProfile')">Profile</a></li>
    </ul>

    <!-- Post Job -->
    <div id="postJob" class="hr-tab active-section">
      <form id="postJobForm">
        <input type="text" id="jobTitle" class="form-control" placeholder="Job Title" required>
        <input type="text" id="jobRole" class="form-control" placeholder="Role" required>
        <input type="number" id="jobExperience" class="form-control" placeholder="Experience Required (Years)" required>
        <input type="text" id="jobSkills" class="form-control" placeholder="Skills Required (comma separated)" required>
        <input type="text" id="jobSalary" class="form-control" placeholder="Salary" required>
        <input type="date" id="jobEndDate" class="form-control" placeholder="End Date" required>
        <textarea id="jobDescription" class="form-control" placeholder="Job Description"></textarea>
        <button type="submit" class="btn btn-primary w-100">Post Job</button>
      </form>
    </div>

    <!-- Posted Jobs -->
    <div id="postedJobs" class="hr-tab"></div>

    <!-- Applications -->
    <div id="applications" class="hr-tab"></div>

    <!-- Profile -->
    <div id="hrProfile" class="hr-tab">
      <h5>HR Profile</h5>
      <p id="hrProfileInfo"></p>
    </div>
  </div>

</div>

<!-- Scripts -->
<script>
const backendURL = "https://backend-ats-z0tb.onrender.com";

function showSection(id){
  document.querySelectorAll('.section').forEach(sec=>sec.classList.remove('active-section'));
  document.getElementById(id).classList.add('active-section');
}

// Applicant Tabs
function showApplicantTab(id){
  document.querySelectorAll('.applicant-tab').forEach(tab=>tab.classList.remove('active-section'));
  document.getElementById(id).classList.add('active-section');
  document.querySelectorAll('#applicantDashboard .nav-link').forEach(link=>link.classList.remove('active'));
  event.target.classList.add('active');
}

// HR Tabs
function showHrTab(id){
  document.querySelectorAll('.hr-tab').forEach(tab=>tab.classList.remove('active-section'));
  document.getElementById(id).classList.add('active-section');
  document.querySelectorAll('#hrDashboard .nav-link').forEach(link=>link.classList.remove('active'));
  event.target.classList.add('active');
}

// Dummy frontend storage (session only)
let applicantData = {};
let hrData = {};
let jobs = [];
let applications = [];

// Applicant Registration
document.getElementById('applicantRegisterForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  let formData = {
    name: document.getElementById('applicantName').value,
    email: document.getElementById('applicantEmail').value,
    password: document.getElementById('applicantPassword').value,
    contact: document.getElementById('applicantContact').value,
    age: document.getElementById('applicantAge').value,
    skills: document.getElementById('applicantSkills').value.split(','),
    experience: document.getElementById('applicantExperience').value,
    degree: document.getElementById('applicantDegree').value,
    university: document.getElementById('applicantUniversity').value
  };
  applicantData = formData;
  alert('Applicant Registered! (Session Only)');
  showSection('applicantDashboard');
  renderJobFeed();
  renderApplicantProfile();
});

// HR Registration
document.getElementById('hrRegisterForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  let formData = {
    companyName: document.getElementById('hrCompanyName').value,
    hrName: document.getElementById('hrName').value,
    email: document.getElementById('hrEmail').value,
    password: document.getElementById('hrPassword').value,
    contact: document.getElementById('hrContact').value,
    description: document.getElementById('hrDescription').value
  };
  hrData = formData;
  alert('HR Registered! (Session Only)');
  showSection('hrDashboard');
  renderHrProfile();
});

// Post Job
document.getElementById('postJobForm').addEventListener('submit', (e)=>{
  e.preventDefault();
  let job = {
    id: Date.now(),
    title: document.getElementById('jobTitle').value,
    role: document.getElementById('jobRole').value,
    experience: document.getElementById('jobExperience').value,
    skills: document.getElementById('jobSkills').value.split(','),
    salary: document.getElementById('jobSalary').value,
    endDate: document.getElementById('jobEndDate').value,
    description: document.getElementById('jobDescription').value
  };
  jobs.push(job);
  alert('Job Posted! (Session Only)');
  renderPostedJobs();
});

// Render Job Feed (Applicant)
function renderJobFeed(){
  let feed = document.getElementById('jobFeed');
  feed.innerHTML = '';
  jobs.forEach(job=>{
    let match = job.skills.every(s=>applicantData.skills.includes(s.trim()));
    let card = `<div class="job-card">
      <h5>${job.title} - ${job.role}</h5>
      <p><strong>Company:</strong> ${hrData.companyName || 'Company'}</p>
      <p><strong>Salary:</strong> ${job.salary}</p>
      <p><strong>Experience Required:</strong> ${job.experience} years</p>
      <p>${job.description}</p>
      <button class="btn btn-primary" onclick="applyJob(${job.id})" ${!match?'disabled':''}>${match?'Apply':'Cannot Apply'}</button>
    </div>`;
    feed.innerHTML += card;
  });
}

// Apply Job
function applyJob(jobId){
  let job = jobs.find(j=>j.id===jobId);
  applications.push({jobId: job.id, applicantEmail: applicantData.email, status: 'Viewed', message: ''});
  alert('Applied Successfully!');
  renderAppliedJobs();
}

// Render Applied Jobs
function renderAppliedJobs(){
  let applied = document.getElementById('appliedJobs');
  applied.innerHTML = '';
  applications.forEach(app=>{
    let job = jobs.find(j=>j.id===app.jobId);
    let badgeClass = app.status==='Viewed'?'status-viewed':app.status==='Shortlisted'?'status-shortlisted':'status-rejected';
    applied.innerHTML += `<div class="job-card">
      <h5>${job.title}</h5>
      <p><strong>Company:</strong> ${hrData.companyName || 'Company'}</p>
      <p>Status: <span class="status-badge ${badgeClass}">${app.status}</span></p>
    </div>`;
  });
}

// Render Applicant Profile
function renderApplicantProfile(){
  let profile = document.getElementById('profileInfo');
  profile.innerHTML = `<strong>Name:</strong> ${applicantData.name}<br>
  <strong>Email:</strong> ${applicantData.email}<br>
  <strong>Contact:</strong> ${applicantData.contact}<br>
  <strong>Age:</strong> ${applicantData.age}<br>
  <strong>Skills:</strong> ${applicantData.skills.join(', ')}<br>
  <strong>Experience:</strong> ${applicantData.experience} years<br>
  <strong>Degree:</strong> ${applicantData.degree}<br>
  <strong>University:</strong> ${applicantData.university}`;
}

// Render HR Profile
function renderHrProfile(){
  let profile = document.getElementById('hrProfileInfo');
  profile.innerHTML = `<strong>HR Name:</strong> ${hrData.hrName}<br>
  <strong>Company:</strong> ${hrData.companyName}<br>
  <strong>Email:</strong> ${hrData.email}<br>
  <strong>Contact:</strong> ${hrData.contact}<br>
  <strong>Description:</strong> ${hrData.description}`;
}

// Render Posted Jobs (HR)
function renderPostedJobs(){
  let posted = document.getElementById('postedJobs');
  posted.innerHTML = '';
  jobs.forEach(job=>{
    posted.innerHTML += `<div class="job-card">
      <h5>${job.title}</h5>
      <p>Role: ${job.role}</p>
      <p>Experience: ${job.experience} years</p>
      <p>Salary: ${job.salary}</p>
      <p>${job.description}</p>
      <button class="btn btn-primary" onclick="deleteJob(${job.id})">Delete</button>
    </div>`;
  });
}

// Delete Job (HR)
function deleteJob(jobId){
  jobs = jobs.filter(j=>j.id!==jobId);
  applications = applications.filter(a=>a.jobId!==jobId);
  renderPostedJobs();
  renderJobFeed();
}

// Initial load
showSection('home');
</script>

</body>
</html>
